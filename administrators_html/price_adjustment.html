<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基价管理</title>
    <link rel="stylesheet" href="administrators.css">
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 获取当前基价
            function getCurrentBasePrice(callback) {
                // 模拟向后端发送请求，这里使用setTimeout模拟异步操作
                setTimeout(function () {
                    // 假设后端返回的数据为 {"basePrice": 100}
                    const currentBasePrice = 100;
                    callback(currentBasePrice);
                }, 500);
            }

            // 修改基价
            function updateBasePrice() {
                const newPrice = document.getElementById('newPrice').value;

                // 弹出确认对话框
                const confirmed = window.confirm('是否确认修改基价？');

                if (confirmed) {
                    // 模拟向后端发送请求，这里使用setTimeout模拟异步操作
                    setTimeout(function () {
                        // 假设后端返回的数据为 {"success": true}
                        const success = true;

                        if (success) {
                            // 显示修改成功消息
                            alert('修改成功');
                            // 更新当前基价并刷新显示
                            getCurrentBasePrice(function (currentBasePrice) {
                                document.getElementById('currentPrice').innerText = currentBasePrice;
                            });
                        } else {
                            // 显示修改失败消息
                            alert('修改失败');
                        }
                    }, 500);
                } else {
                    // 用户取消修改，可以不做任何操作或者显示相应的消息
                    console.log('用户取消修改');
                }
            }

            // 初始化页面
            getCurrentBasePrice(function (currentBasePrice) {
                document.getElementById('currentPrice').innerText = currentBasePrice;
            });

            // 绑定点击事件
            document.getElementById('modifyButton').addEventListener('click', updateBasePrice);
        });
    </script>
</head>
<body>
    <h1>当前基价: <span id="currentPrice"></span></h1>
    <label for="newPrice">输入新的基价: </label>
    <input type="number" id="newPrice" min="0" step="1" required>
    <button id="modifyButton">修改基价</button>
    <p id="result"></p>
</body>
</html>
